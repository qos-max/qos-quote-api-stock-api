**[简体中文](https://github.com/qos-max/quote-ocean-system/blob/main/api.md) | [English](https://github.com/qos-max/quote-ocean-system/blob/main/api_en.md)**
# QOS行情API(Quote Ocean System)接口文档
**quote-ocean-system系统简称"qos行情api"，包括了港股实时API,美股实时API,A股实时API，加密货币实时报价API，数字币实时行情API,采用REST API与websocket接口形式，非常容易接入。免费开源股票API、港股API、美股API、沪深股票API、A股API实时股票行情数据、加密货币实时报价数据，数字币实时行情.QOS行情报价系统目前提供：全港，全美，沪深等股票和加密货币（数字币）的实时报价，实时K线，历史K线数据等，欢迎免费试用及联系作者,现提供免费试用对接。**
- **官网**：[https://qos.hk](https://qos.hk)
- **作者**：Max
- **更新时间**：2025-3-8
- **http基础URL**：`https://api.qos.hk`
- **websocketURL**：`wss://api.qos.hk/ws`
- **认证方式**：请求头添加key字段
- **错误码说明**：msg字段返回"OK"视为成功，非"OK"则是具体的错误描述
- **格式**：所有请求和响应均为 JSON 格式。
- **请求方式**：所有http请求统一为POST方法。
## 联系作者：
- **Telegram**: [https://t.me/stock_quote_api](https://t.me/stock_quote_api)
- **Skype**:[https://join.skype.com/invite/wWXtMxKNFOYE](https://join.skype.com/invite/wWXtMxKNFOYE)
- **Telegram group**: [https://t.me/stock_quote_api_hk_us_ashre_api](https://t.me/stock_quote_api_hk_us_ashre_api)
- **Email**: support@qos.hk
  
## 1、快速开始-接入指南
### 1.1、注册key
访问官网快速注册key:
- **官网**：[https://qos.hk](https://qos.hk)

使用邮箱注册后会得到key相关信息一定要注意保存好，下面的步骤中将要使用。
### 1.2、请求Http接口
把key加入到请求头中使用key字段填充，然后根据http的各个接口定义的参数就可以获取数据了。</br>
[1.2.1、http协议接入说明](#40http协议接入说明)</br>
[1.2.2、获取交易品种的基础信息](#42获取交易品种的基础信息)</br>
[1.2.3、获取交易品种的实时行情快照](#43获取交易品种的实时行情快照)</br>
[1.2.4、获取交易品种的实时最新盘口深度](#44获取交易品种的实时最新盘口深度)</br>
[1.2.5、获取交易品种的实时最新逐笔成交明细](#45获取交易品种的实时最新逐笔成交明细)</br>
[1.2.6、获取交易品种的K线](#46获取交易品种的K线)</br>
[1.2.7、获取交易品种的K线-历史](#47获取交易品种的K线-历史)</br>
### 1.3、订阅webscoket实时数据接口
把key加入到请求头中使用key字段填充，然后建立websocket连接，发送相应的订阅命令，并保持心跳就可以得到实时报价了</br>
[1.3.1、websocket协议接入说明](#50websocket协议接入说明)</br>
[1.3.2、心跳](#51心跳)</br>
[1.3.3、订阅交易品种的实时快照](#52订阅交易品种的实时快照)</br>
[1.3.4、订阅交易品种的实时逐口成交明细](#53订阅交易品种的实时逐口成交明细)</br>
[1.3.5、订阅交易品种的实时盘口](#54订阅交易品种的实时盘口)
## 2、一些枚举定义
### 2.1、K线类型
| 枚举常量 | 值   |
|----------|------|
| min1     | 1    |
| min5     | 5    |
| min15    | 15   |
| min30    | 30   |
| hour1    | 60   |
| hour2    | 120  |
| hour4    | 240  |
| day      | 1001 |
| week     | 1007 |
| month    | 1030 |
| year     | 2001 |
---
### 2.2、交易方向
| 枚举常量 | 值   |
|----------|------|
| unknown     | 0    |
| buy     | 1    |
| sell     | 2    |
---
## 3、各类交易品种的编码和交易时间
| 市场代码 | 说明  | 交易时间         |
|------|-------|------------------------------------------------------|
| US  | 美股 | 美股正常交易时间(美东部时间，ET):</br>开盘时间：上午 9:30</br>收盘时间：下午 4:00</br>盘前交易：</br>开始时间：上午 4:00 </br>结束时间：上午 9:30 </br>盘后交易： </br>开始时间：下午 4:00 </br>结束时间：下午 8:00 </br>夜盘交易： </br>开始时间：下午 8:00 </br>结束时间：第二日上午 3:50 </br>以上时间为美国当地时间,如果换算为其它时间时需要注意令时转换</br> 夏令时（通常从3月的第二个星期日到11月的第一个星期日） </br>冬令时（通常从11月的第一个星期日到3月的第二个星期日） </br>转换为UTC+8冬令开市是22点30分，夏令开市是21点30分。 |
| HK  | 港股 | UTC+8 上午交易时段：9:30 - 12:00 下午交易时段：13:00 - 16:00 |
| SZ  | A股深圳 | UTC+8 上午交易时段：9:30 - 11:30 下午交易时段：13:00 - 15:00 |
| SH  | A股上海 | UTC+8 上午交易时段：9:30 - 11:30 下午交易时段：13:00 - 15:00 |
| CM  | 加密货币 | 24小时 |
## 4、http协议接口定义
### 4.0、http协议接入说明
请求时只需要把请key放在请求头中，填充key字段就可以了。
- **请求Url**: 基础url+各个接口的地址
- **请求方式统一为**: POST,不接受非POST请求
#### 4.0.1、请求头
| 参数 | 类型  | 描述         |
|------|-------|--------------|
| key  | string | 请求的API key |
#### 4.0.2、限制说明
会根据套餐情况限制订阅的产品个数和请求频率，默认是10个产品，每分钟30次请求，可以联系客服根据不同套餐进行调整。
---
### 4.1、注册一个新的Key
- **接口地址**：`/register`
- **请求方式**：`POST`
- **接口描述**：快速免费申请Key,注意：请求此接口后得到的信息请妥善保管，不要外泄。如果忘记请联系客服进行认证找回。

#### 4.1.1、请求参数

| 参数名     | 类型   | 必填  | 描述                        |
|------------|--------|------|-----------------------------|
| `email`     | string | 是  | 请填写真实有效的邮箱，用于接收验证码（后续找回Key和升级权限等可能需要）。   |
#### 4.1.2、请求示例
```json
{
    "email":"test@exp.com"
}
```
#### 4.1.3、响应结果

| 字段名称   | 类型      | 描述                      |
|------------|-----------|---------------------------|
| `key`       | string       | 验证需要的key请妥善保管，不要外泄。如果忘记请联系客服进行认证找回。            |
| `email`    | string    | 用户邮箱                  |
| `created_at`      | string       | key创建时间                  |
| `expires_at` | string    | key过期时间            |
| `permission` | obj    | 权限数据            |
| `> depth` | obj    | 深度快照接口权限            |
| `>> product_count` | int    | 深度快照接口产品数量限制            |
| `>> request_frequency` | int    | 深度快照接口请求频率限制            |
| `> history` | obj    | 历史K线接口权限            |
| `>> product_count` | int    | 历史K线接口产品数量限制            |
| `>> request_frequency` | int    | 历史K线接口请求频率限制            |
| `> instrumen_info` | obj    | 交易品种信息接口权限            |
| `>> product_count` | int    | 交易品种信息接口产品数量限制            |
| `>> request_frequency` | int    | 交易品种信息接口请求频率限制            |
| `> kline` | obj    | K线接口权限            |
| `>> product_count` | int    | K线接口产品数量限制            |
| `>> request_frequency` | int    | K线接口请求频率限制            |
| `> snapshot` | obj    | 行情快照接口权限            |
| `>> product_count` | int    | 行情快照接口产品数量限制            |
| `>> request_frequency` | int    | 行情快照接口请求频率限制            |
| `> trade` | obj    | 成交数据接口权限            |
| `>> product_count` | int    | 成交数据接口产品数量限制            |
| `>> request_frequency` | int    | 成交数据接口请求频率限制            |
| `> ws` | obj    | websocket订阅权限            |
| `>> product_count` | int    | websocket订阅产品数量限制            |
| `>> request_frequency` | int    | websocket订阅请求频率限制           |
#### 4.1.4、响应示例

```json
{
    "msg": "OK",
    "data": {
        "key": "b56efc3a0951ae19819505427491a6ee",
        "email": "test4@qos.com",
        "created_at": "2024-11-12T09:43:12.436446868+08:00",
        "expires_at": "2024-11-27T09:43:12.436446868+08:00",
        "permission": {
            "depth": {
                "product_count": 10,
                "request_frequency": 30
            },
            "history": {
                "product_count": 10,
                "request_frequency": 30
            },
            "instrumen_info": {
                "product_count": 10,
                "request_frequency": 30
            },
            "kline": {
                "product_count": 10,
                "request_frequency": 30
            },
            "snapshot": {
                "product_count": 10,
                "request_frequency": 30
            },
            "trade": {
                "product_count": 10,
                "request_frequency": 30
            },
            "ws": {
                "product_count": 10,
                "request_frequency": 30,
                "max_connections": 1
            }
        }
    }
}
```
---
### 4.2、获取交易品种的基础信息
- **接口地址**：`/instrument-info`
- **请求方式**：`POST`
- **接口描述**：获取交易品种的基础信息

#### 4.2.1、请求参数

| 参数名     | 类型   | 必填  | 描述                        |
|------------|--------|------|-----------------------------|
| `codes`     | array | 是  | 交易品种列表数组，传入细节请看下面请求示例   |
#### 4.2.2、请求示例
```
{
    "codes": [
        "US:AAPL,TSLA",
        "HK:700",
        "SH:600519",
        "CM:BTCUSDT"
    ]
}
```
#### 4.2.3、响应结果

| 字段名称     | 类型   | 描述                                       |
|----------|--------|--------------------------------------------|
| c   | string | 股票代码                                   |
| e   | string | 交易所                                     |
| tc  | string | 交易币种                                   |
| nc  | string | 中文名称                                   |
| ne  | string | 英文名称                                   |
| ls  | integer| 最小交易单位                               |
| ts  | integer| 时间戳                                     |
| os  | integer| 股票总数                                   |
| ep  | string | 每股盈利                                   |
| na  | string | 每股净资产                                 |
| dy  | string | 股息率                                     |
#### 4.2.4、响应示例

```
{
    "msg": "OK",
    "data": [
        {
            "c": "CM:BTCUSDT",
            "e": "Crypto Market",
            "tc": "USDT"
        },
        {
            "c": "US:AAPL",
            "e": "NASD",
            "tc": "USD",
            "nc": "苹果",
            "ne": "Apple Inc.",
            "ls": 1,
            "ts": 15022073000,
            "os": 14998202926,
            "ep": "6.2398844687",
            "na": "4.4439938483",
            "dy": "1"
        },
        {
            "c": "HK:700",
            "e": "SEHK",
            "tc": "HKD",
            "nc": "腾讯控股",
            "ne": "TENCENT",
            "ls": 100,
            "ts": 9178822571,
            "os": 9178822571,
            "ep": "13.8513523179",
            "na": "110.2507143217",
            "dy": "3.4891482482"
        },
        {
            "c": "SH:600519",
            "e": "SSE",
            "tc": "CNY",
            "nc": "贵州茅台",
            "ne": "Moutai",
            "ls": 100,
            "ts": 1256197800,
            "os": 1256197800,
            "ep": "59.49",
            "na": "189.2293196185",
            "dy": "54.758"
        },
        {
            "c": "US:TSLA",
            "e": "NASD",
            "tc": "USD",
            "nc": "特斯拉",
            "ne": "Tesla, Inc.",
            "ls": 1,
            "ts": 3216517037,
            "os": 2799676371,
            "ep": "2.2166834243",
            "na": "22.6683083476",
            "dy": "0"
        }
    ]
}
```
---
### 4.3、获取交易品种的实时行情快照
- **接口地址**：`/snapshot`
- **请求方式**：`POST`
- **接口描述**：获取交易品种的实时行情快照

#### 4.3.1、请求参数

| 参数名     | 类型   | 必填  | 描述                        |
|------------|--------|------|-----------------------------|
| `codes`     | array | 是  | 交易品种列表数组，传入细节请看下面请求示例   |
#### 4.3.2、请求示例
```
{
    "codes": [
        "US:AAPL,TSLA",
        "HK:700",
        "SH:600519",
        "CM:BTCUSDT"
    ]
}
```
#### 4.3.3、响应结果

| 字段名称     | 类型   | 描述                                       |
|----------|--------|--------------------------------------------|
| c   | string | 股票代码                                   |
| lp  | string | 当前价格                                   |
| yp  | string | 昨日收盘价                                 |
| o   | string | 开盘价                                     |
| h   | string | 最高价                                     |
| l   | string | 最低价                                     |
| ts  | integer| 时间戳                                     |
| v   | string | 成交量                                     |
| t   | string | 成交金额                                   |
| s   | integer| 是否停牌（0表示未停牌，1表示停牌）        |
| pq   | object| 美股盘前快照数据，定义见下面        |
| aq   | object| 美股盘后快照数据，定义见下面        |
| nq   | object| 美股夜盘快照数据，定义见下面        |

| 字段名称     | 类型   | 描述                                       |
|----------|--------|--------------------------------------------|
| lp  | string | 当前价格                                   |
| yp  | string | 上次收盘价                                 |
| h   | string | 最高价                                     |
| l   | string | 最低价                                     |
| ts  | integer| 时间戳                                     |
| v   | string | 成交量                                     |
| t   | string | 成交金额                                   |
#### 4.3.4、响应示例

```
{
    "msg": "OK",
    "data": [
        {
            "c": "US:TSLA",
            "lp": "262.67",
            "yp": "263.45",
            "o": "259.32",
            "h": "266.25",
            "l": "250.73",
            "ts": 1741381200,
            "v": "102369640",
            "t": "26608428435",
            "s": 0,
            "pq": {
                "lp": "259.32",
                "ts": 1741357800,
                "v": "1995761",
                "t": "520036922.7879999876",
                "h": "264.38",
                "l": "257.5",
                "yp": "263.45"
            },
            "aq": {
                "lp": "262.38",
                "ts": 1741395599,
                "v": "1447433",
                "t": "380116505.4789999723",
                "h": "263.595",
                "l": "261.5",
                "yp": "262.67"
            }
        },
        {
            "c": "US:AAPL",
            "lp": "239.07",
            "yp": "235.33",
            "o": "235.105",
            "h": "241.37",
            "l": "234.76",
            "ts": 1741381201,
            "v": "46273565",
            "t": "11054929217",
            "s": 0,
            "pq": {
                "lp": "235.33",
                "ts": 1741357801,
                "v": "327164",
                "t": "76869522.0030000061",
                "h": "236.1",
                "l": "233.92",
                "yp": "235.33"
            },
            "aq": {
                "lp": "238.7",
                "ts": 1741395574,
                "v": "2152432",
                "t": "514558623.1269999743",
                "h": "239.07",
                "l": "238.21",
                "yp": "239.07"
            }
        },
        {
            "c": "HK:700",
            "lp": "533.5",
            "yp": "544",
            "o": "539",
            "h": "547",
            "l": "529",
            "ts": 1741334921,
            "v": "46494425",
            "t": "24958094063",
            "s": 0
        },
        {
            "c": "SH:600519",
            "lp": "1521",
            "yp": "1505.98",
            "o": "1503",
            "h": "1528.36",
            "l": "1503",
            "ts": 1741330800,
            "v": "37991",
            "t": "5760608729",
            "s": 0
        },
        {
            "c": "CM:BTCUSDT",
            "lp": "86033.99000000",
            "o": "86801.74000000",
            "h": "86897.25000000",
            "l": "85218.47000000",
            "ts": 1741435564,
            "v": "7224.12720000",
            "t": "622441590.40616980",
            "s": 0
        }
    ]
}
```
---
### 4.4、获取交易品种的实时最新盘口深度
- **接口地址**：`/depth`
- **请求方式**：`POST`
- **接口描述**：获取交易品种的实时最新盘口深度

#### 4.4.1、请求参数

| 参数名     | 类型   | 必填  | 描述                        |
|------------|--------|------|-----------------------------|
| `codes`     | array | 是  | 交易品种列表数组，传入细节请看下面请求示例   |
#### 4.4.2、请求示例
```
{
    "codes": [
        "US:AAPL,TSLA",
        "HK:700",
        "SH:600519",
        "CM:BTCUSDT"
    ]
}
```
#### 4.4.3、响应结果

| 字段名称     | 类型   | 描述                                       |
|----------|--------|--------------------------------------------|
| c   | string | 股票代码                                   |
| b   | array  | 买单数组                                   |
| > p | string | 买单价格                                   |
| > v | string | 买单数量                                   |
| a   | array  | 卖单数组                                   |
| > p | string | 卖单价格                                   |
| > v | string | 卖单数量                                   |
| ts  | integer| 时间戳                                     |
#### 4.4.4、响应示例
```
{
    "msg": "OK",
    "data": [
        {
            "c": "US:AAPL",
            "b": [
                {
                    "p": "224.42",
                    "v": "100"
                }
            ],
            "a": [
                {
                    "p": "224.74",
                    "v": "20"
                }
            ],
            "ts": 1731293478
        },
        {
            "c": "US:TSLA",
            "b": [
                {
                    "p": "295.8",
                    "v": "5"
                }
            ],
            "a": [
                {
                    "p": "295.9",
                    "v": "130"
                }
            ],
            "ts": 1731293478
        },
        {
            "c": "HK:700",
            "b": [
                {
                    "p": "533.5",
                    "v": "51800"
                },
                {
                    "p": "533",
                    "v": "244400"
                },
                {
                    "p": "532.5",
                    "v": "215900"
                },
                {
                    "p": "532",
                    "v": "274900"
                },
                {
                    "p": "531.5",
                    "v": "90400"
                },
                {
                    "p": "531",
                    "v": "234900"
                },
                {
                    "p": "530.5",
                    "v": "88000"
                },
                {
                    "p": "530",
                    "v": "314900"
                },
                {
                    "p": "529.5",
                    "v": "54700"
                },
                {
                    "p": "529",
                    "v": "88000"
                }
            ],
            "a": [
                {
                    "p": "534",
                    "v": "32200"
                },
                {
                    "p": "534.5",
                    "v": "22700"
                },
                {
                    "p": "535",
                    "v": "133200"
                },
                {
                    "p": "535.5",
                    "v": "5400"
                },
                {
                    "p": "536",
                    "v": "226500"
                },
                {
                    "p": "536.5",
                    "v": "42100"
                },
                {
                    "p": "537",
                    "v": "54800"
                },
                {
                    "p": "537.5",
                    "v": "159000"
                },
                {
                    "p": "538",
                    "v": "145500"
                },
                {
                    "p": "538.5",
                    "v": "82400"
                }
            ],
            "ts": 1741435696
        },
        {
            "c": "SH:600519",
            "b": [
                {
                    "p": "1520.91",
                    "v": "20"
                },
                {
                    "p": "1520.8",
                    "v": "1"
                },
                {
                    "p": "1520.6",
                    "v": "2"
                },
                {
                    "p": "1520.53",
                    "v": "3"
                },
                {
                    "p": "1520.51",
                    "v": "10"
                }
            ],
            "a": [
                {
                    "p": "1521",
                    "v": "11"
                },
                {
                    "p": "1521.18",
                    "v": "1"
                },
                {
                    "p": "1521.5",
                    "v": "4"
                },
                {
                    "p": "1521.51",
                    "v": "1"
                },
                {
                    "p": "1521.53",
                    "v": "1"
                }
            ],
            "ts": 1741435696
        },
        {
            "c": "CM:BTCUSDT",
            "b": [
                {
                    "p": "85982.96000000",
                    "v": "0.73541000"
                },
                {
                    "p": "85982.95000000",
                    "v": "0.00012000"
                },
                {
                    "p": "85982.94000000",
                    "v": "0.00012000"
                },
                {
                    "p": "85982.93000000",
                    "v": "0.00012000"
                },
                {
                    "p": "85982.92000000",
                    "v": "0.00025000"
                },
                {
                    "p": "85982.91000000",
                    "v": "0.00006000"
                },
                {
                    "p": "85982.89000000",
                    "v": "0.00006000"
                },
                {
                    "p": "85982.88000000",
                    "v": "0.00006000"
                },
                {
                    "p": "85982.84000000",
                    "v": "0.00013000"
                },
                {
                    "p": "85982.10000000",
                    "v": "0.00006000"
                },
                {
                    "p": "85980.97000000",
                    "v": "0.00148000"
                },
                {
                    "p": "85980.43000000",
                    "v": "0.00014000"
                },
                {
                    "p": "85980.42000000",
                    "v": "0.01163000"
                },
                {
                    "p": "85980.38000000",
                    "v": "0.00006000"
                },
                {
                    "p": "85980.01000000",
                    "v": "0.00014000"
                },
                {
                    "p": "85980.00000000",
                    "v": "0.02236000"
                },
                {
                    "p": "85979.96000000",
                    "v": "0.00008000"
                },
                {
                    "p": "85979.30000000",
                    "v": "0.00014000"
                },
                {
                    "p": "85979.29000000",
                    "v": "0.02224000"
                },
                {
                    "p": "85978.01000000",
                    "v": "0.00014000"
                }
            ],
            "a": [
                {
                    "p": "85982.97000000",
                    "v": "4.69027000"
                },
                {
                    "p": "85982.98000000",
                    "v": "3.02347000"
                },
                {
                    "p": "85983.02000000",
                    "v": "0.00012000"
                },
                {
                    "p": "85983.09000000",
                    "v": "0.00020000"
                },
                {
                    "p": "85983.23000000",
                    "v": "0.00012000"
                },
                {
                    "p": "85983.51000000",
                    "v": "0.00509000"
                },
                {
                    "p": "85983.58000000",
                    "v": "0.00014000"
                },
                {
                    "p": "85983.81000000",
                    "v": "0.00006000"
                },
                {
                    "p": "85983.99000000",
                    "v": "0.25134000"
                },
                {
                    "p": "85984.00000000",
                    "v": "0.02236000"
                },
                {
                    "p": "85984.49000000",
                    "v": "0.76777000"
                },
                {
                    "p": "85984.68000000",
                    "v": "0.01162000"
                },
                {
                    "p": "85984.96000000",
                    "v": "0.00010000"
                },
                {
                    "p": "85985.52000000",
                    "v": "0.00006000"
                },
                {
                    "p": "85986.10000000",
                    "v": "0.00009000"
                },
                {
                    "p": "85986.96000000",
                    "v": "0.00040000"
                },
                {
                    "p": "85986.97000000",
                    "v": "0.00006000"
                },
                {
                    "p": "85987.01000000",
                    "v": "0.04772000"
                },
                {
                    "p": "85987.24000000",
                    "v": "0.00006000"
                },
                {
                    "p": "85987.25000000",
                    "v": "0.04000000"
                }
            ],
            "ts": 1741435696
        }
    ]
}
```
---
### 4.5、获取交易品种的实时最新逐笔成交明细
- **接口地址**：`/trade`
- **请求方式**：`POST`
- **接口描述**：获取交易品种的实时最新逐笔成交明细

#### 4.5.1、请求参数

| 参数名     | 类型   | 必填  | 描述                        |
|------------|--------|------|-----------------------------|
| `codes`     | array | 是  | 交易品种列表数组，传入细节请看下面请求示例   |
| `count`     | integer | 是  | 请求的最近多少条，此数值不能超过50   |
#### 4.5.2、请求示例
```
{
    "codes": [
        "US:AAPL",
        "HK:700",
        "SH:600519",
        "SZ:002594",
        "CM:BTCUSDT"
    ],
    "count": 2
}
```
#### 4.5.3、响应结果

| 字段名称     | 类型   | 描述                                       |
|----------|--------|--------------------------------------------|
| c   | string | 股票代码                                   |
| p   | string | 当前价格                                   |
| v   | string | 当前成交量                                 |
| ts  | integer| 时间戳                                     |
| d  | integer| 交易方向，具体定义参看5.2章节                                     |
#### 4.5.4、响应示例

```
{
    "msg": "OK",
    "data": [
        {
            "c": "HK:700",
            "p": "534",
            "v": "100",
            "ts": 1741334398,
            "d": 1
        },
        {
            "c": "HK:700",
            "p": "533.5",
            "v": "3480900",
            "ts": 1741334919,
            "d": 0
        },
        {
            "c": "US:AAPL",
            "p": "238.7",
            "v": "1",
            "ts": 1741395570,
            "d": 0
        },
        {
            "c": "US:AAPL",
            "p": "238.7",
            "v": "200",
            "ts": 1741395574,
            "d": 0
        },
        {
            "c": "CM:BTCUSDT",
            "p": "85928.19000000",
            "v": "0.00223000",
            "ts": 1741435950,
            "d": 2
        },
        {
            "c": "CM:BTCUSDT",
            "p": "85928.19000000",
            "v": "0.00041000",
            "ts": 1741435951,
            "d": 2
        },
        {
            "c": "SZ:002594",
            "p": "356.36",
            "v": "2",
            "ts": 1741330620,
            "d": 0
        },
        {
            "c": "SZ:002594",
            "p": "356.4",
            "v": "1330",
            "ts": 1741330800,
            "d": 1
        },
        {
            "c": "SH:600519",
            "p": "1520.51",
            "v": "2",
            "ts": 1741330619,
            "d": 0
        },
        {
            "c": "SH:600519",
            "p": "1521",
            "v": "439",
            "ts": 1741330800,
            "d": 1
        }
    ]
}
```
---
### 4.6、获取交易品种的K线
- **接口地址**：`/kline`
- **请求方式**：`POST`
- **接口描述**：获取交易品种的K线，从最近开始向前推多少根的K线。

#### 4.6.1、请求参数

| 参数名     | 类型   | 必填  | 描述                        |
|------------|--------|------|-----------------------------|
| c        | string   | 股票代码，多个股票代码用逗号分隔                |              |
| co       | integer  | Count 请求多少根       |
| a        | integer  | 复权类型 0:不复权 1:前复权        |
| kt        | integer   | K线类型，取值参看5.1章节K线类型定义       |
#### 4.6.2、请求示例
```
{
    "kline_reqs": [
        {
            "c": "US:AAPL,TSLA",
            "co": 2,
            "a": 0,
            "kt": 1001
        },
        {
            "c": "HK:700",
            "co": 2,
            "a": 0,
            "kt": 1001
        },{
            "c": "SH:600519",
            "co": 2,
            "a": 0,
            "kt": 1001
        },{
            "c": "CM:BTCUSDT",
            "co": 2,
            "a": 0,
            "kt": 1001
        }
    ]
}
```
#### 4.6.3、响应结果

| 字段名称     | 类型   | 描述                                       |
|----------|--------|--------------------------------------------|
| c   | string | 股票代码                                   |
| k   | array  | K线数据数组                               |
| > o | string | 开盘价                                     |
| > cl| string | 收盘价                                     |
| > h | string | 最高价                                     |
| > l | string | 最低价                                     |
| > v | string | 成交量                                     |
| > ts| integer| 时间戳                                     |
| > kt | integer | K线类型，取值参看5.1章节K线类型定义       |
#### 4.6.4、响应示例

```
{
    "msg": "OK",
    "data": [
        {
            "c": "US:TSLA",
            "k": [
                {
                    "c": "US:TSLA",
                    "o": "272.06",
                    "cl": "263.45",
                    "h": "272.65",
                    "l": "260.02",
                    "v": "98451566",
                    "ts": 1741237200,
                    "kt": 1001
                },
                {
                    "c": "US:TSLA",
                    "o": "259.32",
                    "cl": "262.67",
                    "h": "266.25",
                    "l": "250.73",
                    "v": "102369640",
                    "ts": 1741323600,
                    "kt": 1001
                }
            ]
        },
        {
            "c": "US:AAPL",
            "k": [
                {
                    "c": "US:AAPL",
                    "o": "234.435",
                    "cl": "235.33",
                    "h": "237.86",
                    "l": "233.158",
                    "v": "45170419",
                    "ts": 1741237200,
                    "kt": 1001
                },
                {
                    "c": "US:AAPL",
                    "o": "235.105",
                    "cl": "239.07",
                    "h": "241.37",
                    "l": "234.76",
                    "v": "46273565",
                    "ts": 1741323600,
                    "kt": 1001
                }
            ]
        },
        {
            "c": "HK:700",
            "k": [
                {
                    "c": "HK:700",
                    "o": "521",
                    "cl": "544",
                    "h": "544",
                    "l": "521",
                    "v": "79683892",
                    "ts": 1741190400,
                    "kt": 1001
                },
                {
                    "c": "HK:700",
                    "o": "539",
                    "cl": "533.5",
                    "h": "547",
                    "l": "529",
                    "v": "46494425",
                    "ts": 1741276800,
                    "kt": 1001
                }
            ]
        },
        {
            "c": "CM:BTCUSDT",
            "k": [
                {
                    "c": "CM:BTCUSDT",
                    "o": "89931.88000000",
                    "cl": "86801.75000000",
                    "h": "91283.02000000",
                    "l": "84667.03000000",
                    "v": "57980.35713000",
                    "ts": 1741305600,
                    "kt": 1001
                },
                {
                    "c": "CM:BTCUSDT",
                    "o": "86801.74000000",
                    "cl": "85960.66000000",
                    "h": "86897.25000000",
                    "l": "85218.47000000",
                    "v": "7352.47947000",
                    "ts": 1741392000,
                    "kt": 1001
                }
            ]
        },
        {
            "c": "SH:600519",
            "k": [
                {
                    "c": "SH:600519",
                    "o": "1474",
                    "cl": "1505.98",
                    "h": "1510.2",
                    "l": "1472.08",
                    "v": "42168",
                    "ts": 1741190400,
                    "kt": 1001
                },
                {
                    "c": "SH:600519",
                    "o": "1503",
                    "cl": "1521",
                    "h": "1528.36",
                    "l": "1503",
                    "v": "37991",
                    "ts": 1741276800,
                    "kt": 1001
                }
            ]
        }
    ]
}
```
---
### 4.7、获取交易品种的K线-历史
- **接口地址**：`/history`
- **请求方式**：`POST`
- **接口描述**：获取交易品种的历史K线，从传入的结束时间向前推多少根的K线。

#### 4.7.1、请求参数

| 参数名     | 类型   | 必填  | 描述                        |
|------------|--------|------|-----------------------------|
| c        | string   | 股票代码，多个股票代码用逗号分隔                |              |
| e        | integer  | 请求K线的结束时间戳，单位秒                 |
| co       | integer  | Count 请求多少根       |
| a        | integer  | 复权类型 0:不复权 1:前复权        |
| kt        | integer   | K线类型，取值参看5.1章节K线类型定义        |
#### 4.7.2、请求示例
```
{
    "kline_reqs": [
        {
            "c": "CM:BTCUSDT",
            "e": 1722441600,
            "co": 1,
            "a": 0,
            "kt": 1001
        }
    ]
}
```
#### 4.7.3、响应结果

| 字段名称     | 类型   | 描述                                       |
|----------|--------|--------------------------------------------|
| c   | string | 股票代码                                   |
| k   | array  | K线数据数组                               |
| > o | string | 开盘价                                     |
| > cl| string | 收盘价                                     |
| > h | string | 最高价                                     |
| > l | string | 最低价                                     |
| > v | string | 成交量                                     |
| > ts| integer| 时间戳                                     |
| > kt | integer | K线类型，取值参看5.1章节K线类型定义       |
#### 4.7.4、响应示例

```
{
    "msg": "OK",
    "data": [
        {
            "c": "CM:BTCUSDT",
            "k": [
                {
                    "c": "CM:BTCUSDT",
                    "o": "66188.00000000",
                    "cl": "64628.00000000",
                    "h": "66849.24000000",
                    "l": "64530.00000000",
                    "v": "22625.43905000",
                    "ts": 1722384000,
                    "kt": 1001
                }
            ]
        }
    ]
}
```
---
## 5、websocket协议接口定义
### 5.0、websocket协议接入说明
建立连接时只需要把请key放在请求头中，填充key字段就可以了，建立连接后就可以开始发送心跳，订阅实时快照，实时报价，实时成交价格了。
- **websocket地址：** wss://api.qos.hk/ws
#### 5.0.1、请求头
| 参数 | 类型  | 描述         |
|------|-------|--------------|
| key  | string | 请求的API key |
#### 5.0.2、限制说明
会根据套餐情况限制订阅的产品个数和建立连接的个数，默认是10个产品，1一个连接，可以联系客服根据不同套餐进行调整。订阅请求的频率每分钟不得超过30次。
### 5.1、心跳
要求每20秒发一次即可
#### 5.1.1、发送心跳
```json
{"type":"H"}
```
#### 5.1.2、心跳响应
```json
{
    "type": "H",
    "msg": "OK",
    "time": 1731640508
}
```
### 5.2、订阅交易品种的实时快照
#### 5.2.1、发送订阅命令
| 字段名称 | 值                                                                 |
|----------|---------------------------------------------------------------------|
| type     | 订阅类型填S,取消订阅填SC                                                              |
| codes    | code列表，具体传入方式请看下面示例 |
#### 5.2.2、订阅命令示例
```json
{
    "type": "S",
    "codes": [
        "US:AAPL",
        "HK:700,9988",
        "SH:600519,688981,601127,600938,601727,600837",
        "SZ:002594",
        "CM:BTCUSDT"
    ]
}
```
#### 5.2.3、订阅命令返回
```json
{
    "type": "S",
    "msg": "OK",
    "time": 1731650860
}
```
#### 5.2.4、取消订阅命令示例
```json
{
    "type": "SC",
    "codes": [
        "US:AAPL",
        "HK:700,9988",
        "SH:600519,688981,601127,600938,601727,600837",
        "SZ:002594",
        "CM:BTCUSDT"
    ]
}
```
#### 5.2.5、取消订阅命令返回
```json
{
    "type": "SC",
    "msg": "OK",
    "time": 1731650871
}
```
#### 5.2.6、数据推送
| 字段名称     | 类型   | 描述                                       |
|----------|--------|--------------------------------------------|
| tp   | string | 数据类型S表示行情快照数据                                  |
| c   | string | 股票代码                                   |
| lp  | string | 当前价格                                   |
| yp  | string | 昨日收盘价                                 |
| o   | string | 开盘价                                     |
| h   | string | 最高价                                     |
| l   | string | 最低价                                     |
| ts  | integer| 时间戳                                     |
| v   | string | 成交量                                     |
| t   | string | 成交金额                                   |
| s   | integer| 是否停牌（0表示未停牌，1表示停牌）        |
#### 5.2.7、数据推送示例
```json
{
    "tp": "S",
    "c": "SH:600938",
    "lp": "25.92",
    "yp": "26.15",
    "o": "26.19",
    "h": "26.19",
    "l": "25.62",
    "ts": 1731650869,
    "v": "694420",
    "t": "1793887058",
    "s": 0
}
```
### 5.3、订阅交易品种的实时逐口成交明细
#### 5.3.1、发送订阅命令
| 字段名称 | 值                                                                 |
|----------|---------------------------------------------------------------------|
| type     | 订阅类型填T,取消订阅填TC                                                              |
| codes    | code列表，具体传入方式请看下面示例 |
#### 5.3.2、订阅命令示例
```json
{
    "type": "T",
    "codes": [
        "US:AAPL",
        "HK:700,9988",
        "SH:600519,688981,601127,600938,601727,600837",
        "SZ:002594",
        "CM:BTCUSDT"
    ]
}
```
#### 5.3.3、订阅命令返回
```json
{
    "type": "T",
    "msg": "OK",
    "time": 1731650860
}
```
#### 5.3.4、取消订阅命令示例
```json
{
    "type": "TC",
    "codes": [
        "US:AAPL",
        "HK:700,9988",
        "SH:600519,688981,601127,600938,601727,600837",
        "SZ:002594"
    ]
}
```
#### 5.3.5、取消订阅命令返回
```json
{
    "type": "TC",
    "msg": "OK",
    "time": 1731650871
}
```
#### 5.3.6、数据推送
| 字段名称     | 类型   | 描述                                       |
|----------|--------|--------------------------------------------|
| tp   | string | 数据类型T表示成交数据                                  |
| c   | string | 股票代码                                   |
| p   | string | 当前价格                                   |
| v   | string | 当前成交量                                 |
| ts  | integer| 时间戳                                     |
| d  | integer| 交易方向，具体定义参看5.2章节                                     |
#### 5.3.7、数据推送示例
```json
{
    "tp": "T",
    "c": "SH:600837",
    "p": 11.75,
    "v": 71,
    "ts": 1731651249,
    "d": 2
}
```
### 5.4、订阅交易品种的实时盘口
#### 5.4.1、发送订阅命令
| 字段名称 | 值                                                                 |
|----------|---------------------------------------------------------------------|
| type     | 订阅类型填D,取消订阅填DC                                                              |
| codes    | code列表，具体传入方式请看下面示例 |
#### 5.3.2、订阅命令示例
```json
{
    "type": "D",
    "codes": [
        "US:AAPL",
        "HK:700,9988",
        "SH:600519,688981,601127,600938,601727,600837",
        "SZ:002594",
        "CM:BTCUSDT"
    ]
}
```
#### 5.3.3、订阅命令返回
```json
{
    "type": "D",
    "msg": "OK",
    "time": 1731650860
}
```
#### 5.3.4、取消订阅命令示例
```json
{
    "type": "DC",
    "codes": [
        "US:AAPL",
        "HK:700,9988",
        "SH:600519,688981,601127,600938,601727,600837",
        "SZ:002594",
        "CM:BTCUSDT"
    ]
}
```
#### 5.3.5、取消订阅命令返回
```json
{
    "type": "DC",
    "msg": "OK",
    "time": 1731650871
}
```
#### 5.3.6、数据推送
| 字段名称     | 类型   | 描述                                       |
|----------|--------|--------------------------------------------|
| tp   | string | 数据类型D表示盘口深度                                   |
| c   | string | 股票代码                                   |
| b   | array  | 买单数组                                   |
| > p | string | 买单价格                                   |
| > v | string | 买单数量                                   |
| a   | array  | 卖单数组                                   |
| > p | string | 卖单价格                                   |
| > v | string | 卖单数量                                   |
| ts  | integer| 时间戳                                     |
#### 5.3.7、数据推送示例
```json
{
    "tp": "D",
    "c": "SH:688981",
    "b": [
        {
            "p": "96.66",
            "v": "21"
        },
        {
            "p": "96.65",
            "v": "16"
        },
        {
            "p": "96.63",
            "v": "13"
        },
        {
            "p": "96.61",
            "v": "6"
        },
        {
            "p": "96.6",
            "v": "34"
        }
    ],
    "a": [
        {
            "p": "96.67",
            "v": "221"
        },
        {
            "p": "96.7",
            "v": "10"
        },
        {
            "p": "96.71",
            "v": "1542"
        },
        {
            "p": "96.74",
            "v": "62"
        },
        {
            "p": "96.75",
            "v": "915"
        }
    ],
    "ts": 1731651419
}
```
